<!DOCTYPE html> 
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gideon - Guardi√£ Pessoal</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap');
    body {
      margin: 0;
      padding: 0;
      background: radial-gradient(circle at center, #0a0f24 0%, #000 100%);
      color: #00ffe0;
      font-family: 'Orbitron', sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 1rem;
      box-sizing: border-box;
      overflow-y: auto;
    }
    .hologram {
      background: rgba(0, 255, 224, 0.05);
      border: 1px solid rgba(0, 255, 224, 0.3);
      border-radius: 1rem;
      padding: 2rem;
      text-align: center;
      backdrop-filter: blur(10px);
      box-shadow: 0 0 30px rgba(0, 255, 224, 0.4);
      animation: float 4s ease-in-out infinite;
      max-width: 100%;
      width: 500px;
    }
    .hologram img {
      width: 100%;
      max-width: 200px;
      border-radius: 1rem;
      opacity: 0.9;
      filter: drop-shadow(0 0 15px #00ffe0aa);
      animation: flicker 2s infinite alternate;
    }
    @keyframes flicker {
      0% { opacity: 0.8; }
      100% { opacity: 1; }
    }
    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    .hologram h1 {
      font-size: 2rem;
      margin-bottom: 1rem;
    }
    .temp, .message, .advice, .alert, .extra-info {
      font-size: 1.1rem;
      margin-top: 1rem;
      word-wrap: break-word;
    }
    .alert-danger {
      color: #ff4444;
      font-size: 1.3rem;
      font-weight: bold;
      text-shadow: 0 0 5px #ff0000;
    }
    .signature {
      margin-top: 2rem;
      font-size: 0.9rem;
      opacity: 0.6;
    }
    .icon {
      font-size: 2rem;
      display: block;
      margin-bottom: 0.5rem;
    }
    .forecast {
      margin-top: 2rem;
      text-align: left;
    }
    .forecast-day {
      margin-bottom: 1rem;
    }
    .forecast-day h3 {
      margin: 0;
      font-size: 1.2rem;
    }
    .forecast-day p {
      margin: 0.2rem 0;
      font-size: 1rem;
    }

    /* NOVAS ESTILIZA√á√ïES PARA ANSIEDADE E EXERC√çCIO */
    #ansiedade {
      margin-top: 1.5rem;
      padding: 1rem;
      background: rgba(0, 255, 224, 0.1);
      border-radius: 1rem;
      color: #00ffe0;
      font-size: 1.1rem;
      min-height: 60px;
      user-select: none;
    }
    #btnRespiracao {
      margin-top: 1rem;
      padding: 0.5rem 1rem;
      font-size: 1rem;
      cursor: pointer;
      background: #00ffe0; 
      border: none;
      border-radius: 0.5rem;
      color: #000;
      font-weight: bold;
      transition: background-color 0.3s ease;
    }
    #btnRespiracao:hover {
      background-color: #00ccbb;
    }
    @media (max-width: 600px) {
      .hologram {
        padding: 1.5rem;
      }
      .hologram h1 {
        font-size: 1.6rem;
      }
      .temp, .message, .advice, .alert, .extra-info {
        font-size: 1rem;
      }
      .alert-danger {
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <div class="hologram">
    <div id="iconeClima" class="icon">‚òÄÔ∏è</div>
    <img src="assets/gideon.png.png" alt="Gideon Holograma" />
    <h1>Ol√°, eu sou a Gideon</h1>
    <p class="temp" id="temperatura">Carregando clima atual...</p>
    <p class="message" id="mensagem">Aguarde...</p>
    <p class="advice" id="conselho">Analisando amea√ßas potenciais...</p>
    <p class="alert" id="alerta">‚ö†Ô∏è Monitorando seu entorno...</p>
    <p class="extra-info" id="infoExtra">Detalhes do clima sendo carregados...</p>

    <!-- NOVA SESS√ÉO PARA ANSIEDADE E ESTRESSE -->
    <div id="ansiedade">Aqui a Gideon vai te ajudar a controlar a ansiedade e o estresse.</div>
    <button id="btnRespiracao">Iniciar exerc√≠cio de respira√ß√£o</button>

    <!-- Bot√£o para atualizar clima -->
    <button id="botaoAtualizar" style="border-radius: 0.5rem; background: #00ffe0; color: #000; margin-top: 1rem; padding: 0.5rem 1rem; font-size: 1rem; cursor: pointer;">
      Atualizar Clima
    </button>

    <div class="forecast" id="previsaoDias">
      <h2>Previs√£o do Tempo:</h2>
      <!-- Previs√£o ser√° inserida aqui -->
    </div>
    <p class="signature">"Maycon se preocupa com sua seguran√ßa" ‚Äî Gideon ativada üí†</p>
  </div>

  <script>
    const cidade = "Brasilia";
    const iconeClima = document.getElementById("iconeClima");
    const botaoAtualizar = document.getElementById("botaoAtualizar");
    const btnRespiracao = document.getElementById("btnRespiracao");
    const ansiedadeDiv = document.getElementById("ansiedade");
    const API_KEY = "98b6c743102249708f5202002253005";

    let vozFeminina = null;

    // Carregar vozes dispon√≠veis e selecionar voz feminina em portugu√™s com mais precis√£o
    function configurarVozFeminina() {
      const synth = window.speechSynthesis;
      const vozes = synth.getVoices();

      // Buscar vozes femininas populares em pt-BR
      vozFeminina =
        vozes.find(v => v.lang === "pt-BR" && v.name.toLowerCase().includes("luciana")) ||
        vozes.find(v => v.lang === "pt-BR" && v.name.toLowerCase().includes("fernanda")) ||
        vozes.find(v => v.lang === "pt-BR" && v.name.toLowerCase().includes("google")) ||
        // Caso n√£o encontre, pega qualquer voz pt-BR que n√£o contenha 'male' no nome
        vozes.find(v => v.lang === "pt-BR" && !v.name.toLowerCase().includes("male")) ||
        vozes.find(v => v.lang.startsWith("pt")) || // fallback qualquer pt
        vozes[0]; // fallback geral

      // Opcional: log para voc√™ ver qual voz foi escolhida
      // console.log("Voz feminina selecionada:", vozFeminina ? vozFeminina.name : "Nenhuma voz encontrada");
    }

    // Aguardar vozes carregarem antes de configurar a voz feminina
    if (speechSynthesis.onvoiceschanged !== undefined) {
      speechSynthesis.onvoiceschanged = configurarVozFeminina;
    }

    function falar(texto) {
      if (!vozFeminina) configurarVozFeminina();

      if (!vozFeminina) {
        console.warn("Nenhuma voz feminina dispon√≠vel, usando padr√£o.");
      }

      const utter = new SpeechSynthesisUtterance(texto);
      utter.voice = vozFeminina;
      utter.pitch = 1.2;
      utter.rate = 1;
      window.speechSynthesis.speak(utter);
    }

    function atualizarClima() {
      const urlClima = `https://api.weatherapi.com/v1/current.json?key=${API_KEY}&q=${cidade}&lang=pt`;

      fetch(urlClima)
        .then(res => res.json())
        .then(data => {
          const temp = data.current.temp_c;
          let mensagem = "", conselho = "", alerta = "", falaExtra = "";
          let hora = new Date().getHours();

          if (temp <= 10) {
            mensagem = "Est√° bem frio por a√≠!";
            conselho = "Use roupas quentinhas e cuide da sua sa√∫de. Maycon te protege e sua Amiga Gideon tamb√©m";
            alerta = "‚ùÑÔ∏è Cuidado com o frio!";
            falaExtra = "Lembre-se de tomar uma bebida quente para se aquecer.";
          } else if (temp > 10 && temp <= 19) {
            mensagem = "Clima ameno, √≥timo para uma caminhada!";
            conselho = "N√£o esque√ßa de se hidratar. Maycon n√£o aceita voc√™ ficar sem √°gua no corpo";
            falaExtra = "Dias assim s√£o perfeitos para recarregar as energias. Maycon e eu vamos te proteger, Sabrina";
          } else if (temp > 19 && temp <= 27) {
            mensagem = "Clima agrad√°vel para suas atividades.";
            conselho = "Aproveite o dia e se hidrate. Maycon te protege";
            falaExtra = "Voc√™ √© capaz de conquistar muito hoje! Maycon est√° sempre ao seu lado e eu tamb√©m";
          } else if (temp > 27) {
            mensagem = "Temperatura alta, risco de desidrata√ß√£o!";
            conselho = "Hidrate-se bastante e evite o sol forte. Maycon te protege de tudo e de todos";
            alerta = "üî• Cuidado com o calor! Use protetor solar e um guarda chuva, Maycon que ver voc√™ segura do sol";
            falaExtra = "D√™ uma pausa e respire fundo. Maycon e a eu vamos proteger voc√™";
          }

          document.getElementById("temperatura").textContent = `${temp}¬∞C`;
          document.getElementById("mensagem").textContent = mensagem;
          document.getElementById("conselho").textContent = conselho;
          document.getElementById("alerta").textContent = alerta;

          let emocional = "Mantenha a calma, mesmo em dias dif√≠ceis. Maycon se preocupa com sua sa√∫de mental e sua seguran√ßa";
          if (hora >= 6 && hora < 12) {
            emocional = "Bom dia! Inspire positividade e expire tens√£o. Maycon mandou dizer que ele n√£o t√° presente, mais mandou um beijo na testa ";
          } else if (hora >= 12 && hora < 18) {
            emocional = "Boa tarde! Fa√ßa pausas para respirar. Se o trabalho tiver muito puxado n√£o esque√ßa que o Maycon e eu Estamos aqui com voc√™";
          } else {
            emocional = "Boa noite! Permita-se relaxar. Coloque a m√∫sica do Orochi e respire fundo";
          }

          ansiedadeDiv.textContent = emocional + " " + falaExtra;
          document.getElementById("infoExtra").textContent = `Condi√ß√£o atual: ${data.current.condition.text}`;

          // √çcone de clima
          const condicao = data.current.condition.text.toLowerCase();
          if (condicao.includes("chuva")) {
            iconeClima.textContent = "üåßÔ∏è";
          } else if (condicao.includes("nublado") || condicao.includes("nuvem")) {
            iconeClima.textContent = "‚òÅÔ∏è";
          } else if (condicao.includes("ensolarado") || condicao.includes("sol")) {
            iconeClima.textContent = "‚òÄÔ∏è";
          } else {
            iconeClima.textContent = "üå§Ô∏è";
          }

          // Gideon fala com voz de mulher
          falar(`${mensagem}. ${conselho}. ${falaExtra}`);
        })
        .catch(() => {
          document.getElementById("temperatura").textContent = "Erro ao obter o clima.";
          ansiedadeDiv.textContent = "Estou aqui para ajudar, Fui criada pelo Maycon pra te manter segura do clima e do estresse e ansiedade. Mesmo sem os dados do clima.";
          falar("Desculpe, n√£o consegui carregar o clima agora. Mas estou aqui com voc√™, Mande uma mensagem pro Maycon, pra ele resolver o problema.");
        });
      atualizarPrevisaoDias();
    }
    function atualizarPrevisaoDias() {
      const urlForecast = `https://api.weatherapi.com/v1/forecast.json?key=${API_KEY}&q=${cidade}&days=4&lang=pt`;

      fetch(urlForecast)
        .then(res => res.json())
        .then(data => {
          const forecastDiv = document.getElementById("previsaoDias");
          forecastDiv.innerHTML = `<h2>Previs√£o do Tempo:</h2>`; // reset

          data.forecast.forecastday.forEach(day => {
            const date = new Date(day.date);
            const options = { weekday: 'long', day: 'numeric', month: 'long' };
            const diaFormatado = date.toLocaleDateString('pt-BR', options);
            const condicao = day.day.condition.text;
            const tempMin = day.day.mintemp_c;
            const tempMax = day.day.maxtemp_c;
            const iconUrl = day.day.condition.icon;

            const dayHtml = `
              <div class="forecast-day">
                <h3>${diaFormatado}</h3>
                <p><img src="https:${iconUrl}" alt="${condicao}" style="vertical-align:middle; width:24px; height:24px;"> ${condicao}</p>
                <p>Min: ${tempMin}¬∞C | Max: ${tempMax}¬∞C</p>
              </div>
            `;

            forecastDiv.insertAdjacentHTML('beforeend', dayHtml);
          });
        })
        .catch(() => {
          const forecastDiv = document.getElementById("previsaoDias");
          forecastDiv.innerHTML = "<p>Erro ao obter previs√£o dos pr√≥ximos dias.</p>";
        });
    }

    // Respira√ß√£o guiada com fala
    function exercicioRespiracao() {
      const passos = [
        "Inspire profundamente pelo nariz... quatro segundos...",
        "Segure o ar... sete segundos...",
        "Expire lentamente pela boca... oito segundos...",
        "Muito bem. Repita esse ciclo se desejar se acalmar ainda mais."
      ];
      passos.forEach((frase, i) => {
        setTimeout(() => falar(frase), i * 7000);
      });
    }

    botaoAtualizar.addEventListener("click", atualizarClima);
    btnRespiracao.addEventListener("click", exercicioRespiracao);

    // In√≠cio autom√°tico
    window.onload = () => {
      configurarVozFeminina();
      setTimeout(atualizarClima, 500);
    };
  </script>


</body>
</html>
